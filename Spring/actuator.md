# Spring Boot actuator
* 엑추에이터 : 시스템을 움직이거나 제어하는 데 쓰이는 기계 장치

## 프로덕션 준비 기능
* 프로덕션을 운영환경에 배포할 때 준비해야 하는 비 기능적 요소
* 장애는 언제든지 발생할 수 있다. 하지만 모니터링(경계)은 잘 대응하는 것이 중요하다.
* 개발자가 애플리케이션을 개발할 때 기능 요구사항만 개발하는 것은 아니다.
* 서비스에 문제가 없는지 모니터링하고 지표들을 심어서 감시하는 활동도 있다.

## 모니터링
* 지표(metric), 추적(trace), 감사(auditing)
* 모니터링
-> 애플리케이션이 현재 살아있는지, 로그 정보는 정상 설정 되었는지, 커넥션 풀은 얼마나 사용되고 있는지 등 확인

## 엔드포인트 설정
엔드포인트를 사용하려면 다음 2가지 과정이 모두 필요하다.
1. 엔드포인트 활성화
    * 엔드포인트를 활성화 한다는 것은 해당 기능 자체를 사용할지 말지를 선택하는 것이다
2. 엔드포인트 노출
    * 엔드포인트를 HTTP에 노출할지 아니면 JMX에 노출할지 선택하는 것이다.

### 자주 사용하는 엔드포인트
* beans : 스프링 컨테이너에 등록된 스프링 빈을 보여준다.
* conditions : condition 을 통해서 빈을 등록할 때 평가 조건과 일치하거나 일치하지 않는 이유를 표시한다.
* configprops : @ConfigurationProperties 를 보여준다.
* env : Environment 정보를 보여준다.
* health : 애플리케이션 헬스 정보를 보여준다.
* httpexchanges : HTTP 호출 응답 정보를 보여준다.
* HttpExchangeRepository 를 구현한 빈을 별도로
등록해야 한다.
* info : 애플리케이션 정보를 보여준다.
* loggers : 애플리케이션 로거 설정을 보여주고 변경도 할 수 있다.
* metrics : 애플리케이션의 메트릭 정보를 보여준다.
* mappings : @RequestMapping 정보를 보여준다.
* threaddump : 쓰레드 덤프를 실행해서 보여준다.
* shutdown : 애플리케이션을 종료한다. 이 기능은 기본으로 비활성화 되어 있다.

### httpexchanges
지금까지 실행한 HTTP 요청과 응답 정보를 확인할 수 있다. 이 기능은 매우 단순하고 기능에 제한이 많기 때문에 개발 단계에서만 사용하고, 실제 운영 서비스에서는 모니터링 툴이나 핀포인트, Zipkin 같은 다른 기술을 사용하는 것이 좋다.

### 전체 엔드포인트
https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.endpoints

## 보안
* 그래서 외부 인터넷 망이 공개된 곳에 액츄에이터의 엔드포인트를 공개하는 것은 보안상 좋은 방안이 아니다.
* 액츄에이터의 엔드포인트들은 외부 인터넷에서 접근이 불가능하게 막고, 내부에서만 접근 가능한 내부망을 사용하는 것이 안전하다.