# HTTP와 HTTPS

## HTTP(HyperText Transfer Protocol)
* 애플리케이션 계층 프로토콜
* HTML과 같은 하이퍼텍스트를 전송
* 웹 브라우저와 웹 서버 간 통신 담당
* 클라이언트-서버 모델
* 무상태 프로토콜 : 서버가 클라이언트의 상태를 보존하지 않음

## HTTPS(HyperText Transfer Protocol over Secure Socket Layer)
* HTTP + Secure Socket Layer
* 통신의 인증과 암호화를 위해 개발됨
* SSL이나 TLS 프로토콜을 통해 세션 데이터 암호화
* SSL 프로토콜 위에서 HTTPS 프로토콜 동작

> TLS(Transport Layer Security)는 과거 SSL에서 이름이 변경된 것이다. 하지만 아직도 SSL이란 명칭이 많이 사용되고 있다.

## SSL의 동작 방식
공개키 암호화 방식과 공개키의 단점을 보완한 대칭키 암호화 방식을 함께 사용한다.(공개키 방식은 느리다는 단점이 있다.)
공개키방식으로 대칭키를 전달하고, 서로 공유된 대칭키를 가지고 통신하게 된다.

[인증서가 발급되는 과정]
![image](https://github.com/kmularise/TIL/assets/106499310/8aa77ec6-3b2f-45c2-a733-eb87617ba096)

1. 인터넷 사이트는 자신의 정보와 공개키를 인증기관에 제출한다.
2. 인증기관은 제출된 데이터 검증절차를 거쳐 개인키로 사이트에서 제출한 정보를 암호화한다. ==> 인증서 발급
3. 인증기관은 웹 브라우저에게 자신의 공개키를 제공한다. -> 웹브라우저는 공인인증기관 리스트와 각각의 공개키를 알고 있다.

[사용자가 사이트에 접속한 경우]
![image](https://github.com/kmularise/TIL/assets/106499310/f252cac0-bb05-4f0a-b8e3-b8a284a3ddfc)

1. 사용자가 사이트에 접속하면 자신의 인증서를 웹 브라우저에게 보낸다.
2. 웹브라우저는 미리 받았던 인증기관의 공개키로 인증서를 해독하여 검증한다. 그러면 사이트의 정보와 사이트의 공개키를 알 수 있게 된다.
3. 이렇게 얻은 사이트 공개키로 대칭키를 암호화해서 다시 사이트에 보낸다.
4. 사이트는 개인키로 암호문을 해독해 대칭키를 얻게 되고, 이제 대칭키로 데이터를 주고받을 수 있게 된다.

![image](https://github.com/kmularise/TIL/assets/106499310/89ab2c60-492b-424a-9920-6d48bc155c6b)

5. 안전하게 전달된 대칭키로 통신
6. 세션이 종료되면 대칭키 폐기
    * 대칭키는 매번 랜덤으로 생성되어 누출되어도 다음번에 사용할 때에는 다른 키가 사용되기 때문에 안전하다.

## 공개키 암호화 방식
* 2개의 키로 데이터 관리 : 공개키, 비공개키(private key, 개인키)
* 2개의 키를 A, B라 하면 
    * A 키로 암호화하면 B 키로만 복호화할 수 있다.
    * B 키로 복호화하면 A 키로만 암호화할 수 있다.
* 공개키 : 공개해도 괜찮다.
* 비공개키 : 제3자에게 알려지지 않도록 잘 관리해야 한다.

데이터를 공개키로 암호화해 송신할 경우
1. 송신자는 수신자가 공개한 공개키를 입수한다.
2. 공개키로 데이터를 암호화해서 전송한다.
3. 수신자는 비밀키로 암호 데이터를 복호한다.
-> 누구나 공개키로 데이터를 암호화할 수 있다. 비밀키를 가진 사용자만이 복호할 수 있다.
-> 비밀키로 데이터를 암호화한 경우, 공개키로만 복호할 수 있다. 데이터를 암호화해서 보낸 사람이 비밀키를 가진 사용자임을 확인할 수 있다.

* 공개키가 진짜인지 확인할 필요가 있다.
    * 인증기관에서 발행한 디지털 인증서로 공개키 암호를 안전하게 이용할 수 있도록 한다.

## 대칭키 암호화 방식
* 1개의 키로 데이터 관리 : 대칭키는 동일한 키로 암호화 복호화가 가능하다. 
* 대칭키는 매번 랜덤으로 생성되어 누출되어도 다음번에 사용할 때에는 다른 키가 사용되기 때문에 안전하다.
* 공개키보다 빠르게 통신할 수 있다.