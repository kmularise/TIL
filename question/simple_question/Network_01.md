# 네트워크 질문 1
## OSI 7 계층
### TCP와 UDP
* UDP가 왜 빠를까요?
    * UDP가 빠른 이유는 크게 두가지라고 생각합니다. 첫번째는 연결 수립 과정이 없기 때문입니다. 두번째는 패킷 순서 및 도착을 확인하지 않기 때문입니다.

* UDP를 어디에 사용할 수 있을까요?
    * UDP의 장점은 속도입니다. 따라서 스트리밍 서비스, DNS, DHCP와 같이 빠른 전송이 필요한 경우에 사용됩니다.

* TCP와 UDP의 차이에 대해 설명해주세요
    * 첫번재로, TCP는 데이터 전송 전에 연결 수립을 확인하는 과정이 있고 UDP는 없습니다. 두번째로 TCP는 패킷을 사용하고 UDP는 데이터그램을 사용합니다. 세번째로 TCP는 순서를 보장하고 UDP는 순서를 보장하지 않습니다. 

* TCP Checksum에 대해서 설명해주세요
    * TCP Checksum은 TCP 패킷의 무결성을 검사하는데 사용합니다. 패킷이 송신자로부터 수신자에게 전달되는 과정에서 발생할 수 있는 오류를 감지합니다. checksum이 모든 오류를 감지하는 것은 아닙니다. 만약 데이터의 일부가 손상되어 checksum 계산 결과에 영향을 주지 않는 경우에는 감지하지 못합니다.

* TCP와 UDP는 각각 손상된 패킷 어떻게 대처하나요
    * TCP는 손실된 패킷에 대해 재전송을 하지만, UDP는 손실된 패킷에 대해 재전송을 하지 않습니다.


# LAN과 WAN의 차이에 대해서 설명해주세요.
네트워크는 규모를 기반으로 분류할 수 있고, LAN과 WAN은 규모에 차이가 있습니다. LAN은 근거리 통신망으로 전송속도가 빠르고 혼잡하지 않습니다. WAN은 광역 네트워크로 전송속도가 느리고 혼잡합니다.

```
- LAN(Local Area Network) : 근거리 통신망, 전송속도 빠름, 혼잡하지 않음
- MAN(Metropolitan Area Network) : 대도시 지역 네트워크, 전송속도 평균, 혼잡도 평균
- WAN(Wide Area Network) : 광역 네트워크(국가 또는 대륙), 전송속도 낮음, MAN보다 혼잡함 
```
## 네트워크 계층과 전송 계층의 차이점에 대해 설명해주세요
전송 계층은 데이터의 신뢰성 있는 전송과 애플리케이션 간의 통신을 관리하는 반면 네트워크 계층은 서로 다른 네트워크 간의 라우팅에 초점을 맞춥니다. 전송 계층은 포트번호를 사용하여 애플리케이션 간의 통신을 구분하고, 네트워크 계층은 IP 주소를 사용하여 네트워크 장치 간의 통신을 구분한다.

## 패킷의 순서가 꼬여서 도착하면 어떻게 할까요?
* TCP : TCP는 패킷의 시퀀스 번호를 기반으로 패킷을 올바른 순서대로 재배열합니다. 이 과정은 수신자 측에서 버퍼를 사용하여 이루어집니다. 패킷이 올바른 순서대로 조립되면 데이터는 상위계층으로 전달됩니다.
* UDP : UDP는 패킷 순서를 관리하지 않기 때문에 별도의 처리를 하지 않습니다.

## 라우터와 스위치의 차이에 대해서 설명해주세요
* 차이점 :
    * 라우터 : 데이터 패킷이 네트워크를 통과하여 대상에 도달하는 경로를 선택합니다. 라우터는 서로 다른 네트워크를 연결하고 인터넷을 구성하는 대규모 네트워크인 LAN, WAN 등의 네트워크에서 네트워크로 데이터를 전달하여 이를 수행합니다. 라우터는 따라서 인터넷 연결이 필요합니다.
    * 스위치 : 장치를 상호 연결하는 데만 사용됩니다.

## 스위치와 허브의 차이는 무엇일까요?
* 공통점 : 여러기기를 하나로 연결합니다.
* 차이점 :
    * 허브 : 연결된 기기 중 하나에서 전송된 패킷이 허브에 연결된 모든 기기로 브로드캐스팅됩니다.
    * 스위치 : 패킷의 목적지 주소로 지정된 기기로 이어지는 포트로만 패킷이 전달됩니다.
```
- 스위치 : 여러 장비 연결, 데이터 통신 중재, 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비
```
## OSI 각 층의 장비에 대해서 설명해주세요
* 기본
애플리케이션 계층에는 L7 스위치가 있고, 인터넷 계층에는 라우터와 L3스위치가 있습니다. 데이터 링크 계층에는 L2 스위치, 브릿지가 있고, 물리 계층에는 NIC, 리피터, AP가 있습니다.

* 추가 질문이 들어오는 경우
    * 애플리케이션 계층 : 
        * L7 스위치 : 로드밸런서라고도 하며, 서버의 부하를 분산하는 기기입니다. 클라이언트로부터 오는 요청들의 뒤쪽의 여러 서버로 나누는 역할을 합니다. 최종적으로 시스템이 처리할 수 있는 트래픽을 증가시키는 것을 목표로 합니다. URL, 서버, 캐시, 쿠키들을 기반으로 트래픽을 분산합니다. 또한 바이러스, 불필요한 외부 데이터 등을 걸러내는 필터링 기능 또한 가지고 있으며 애플리케이션 수준의 트래픽 모니터링이 가능합니다. 만약 장애가 발생한 서버가 있다면 이를 트래픽 분산 대상에서 제외해야 하는데, 이는 정기적으로 헬스 체크를 이용하여 감시하면서 이루어집니다.
    * 인터넷 계층
        * 라우터 : 여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할을 합니다. 다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고 받을 때 패킷 소모를 최소화하고 경로를 최적화하여 최소 경로로 패킷을 포워딩 합니다.
        * L3 스위치 : L2 스위치 기능과 라우팅 기능을 갖춘 장비입니다. L3 스위치를 라우터라고도 합니다.
    * 데이터 링크 계층 :
        * L2 스위치 : 장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리하며, 연결된 장치로부터 패킷이 왔을 때 패킷 전송을 담당합니다. IP 주소를 이해하지 못해 IP 주소 기반으로 라우팅이 불가능하며 단순히 패킷의 MAC 주소를 읽어 스위칭하는 역할을 합니다.
        * 브릿지 : 두 개의 LAN을 상호 접속할 수 잇도록 하는 통신망 연결 장치로 포트와 포트 사이의 다리 역할을 하며 받아온 MAC 주소를 MAC 주소 테이블로 관리합니다.
    * 물리 계층
        * NIC(LAN 카드) : 2대 이상의 컴퓨터 네트워크를 구성하는 데 사용되며, 네트워크와 빠른 속도로 데이터를 송수신 할 수 있도록 컴퓨터 내에 설치하는 확장카드입니다. NIC에는 각각을 구분하기 위한 고유 식별번호인 MAC 주소가 있습니다. 
        * 리피터(repeater) : 들어오는 약해진 신호를 증폭시켜 다른 쪽으로 전달하는 장치입니다.
        * AP : 패킷을 복사하는 기기, 유선 LAN과 무선 LAN 간의 연결을 제공합니다.
    

```
- L7 애플리케이션 계층 : L7 스위치
- L3 인터넷 계층 : 라우터, L3 스위치
- L2 데이터 링크 계층 : L2 스위치, 브릿지
- L1 물리 계층 : NIC, 리피터, AP
```
* L4 스위치는 전송 계층의 기기라고 볼 수 있는가?
아니다. 전송계층에서 작동하는 기능을 제공하지만 엄밀히 말해서 전송 계층의 기기라고 보기는 어렵다. L4 스위치는 기본적으로 L3 스위치이고 추가적으로 전송 계층의 정보, 특히 TCP나 UDP 프로토콜의 포트번호를 기반으로 트래픽을 관리하고 로드밸런싱하는 능력을 갖추고 있는 것이다.


## 포트 번호는 어느 계층에서 사용할까요?
* 전송 계층의 포트 번호 (TCP/UDP 포트)
    * 전송 계층에서 TCP나 UDP 프로토콜을 사용할 때, 특정 프로세스 또는 서비스를 식별하기 위해 사용되는 숫자입니다. 이 포트번호는 네트워크 내 특정 호스트 내의 애플리케이션 또는 프로세스에 데이터를 전달하는데 사용됩니다. 
* 물리적 네트워크 포트
    * 라우터, 스위치, 허브 등과 같은 네트워크 장비에 있는 물리적인 접속점을 뜻합니다. 이 포트에는 이더넷 케이블이 연결되어 있어 네트워크 통신이 가능합니다.
    * 이러한 물리적 포트는 데이터 링크 계층과 연관되어 있으며, 물리적인 네트워크 연결을 위한 인터페이스 역할을 합니다.



## L2, L3, L4, L7 각 스위치 차이를 설명해주세요
1. L7 스위치와 L4 스위치 비교
    * 공통점 : L7 스위치와 L4 스위치는 둘 다 로드밸런서로, 서버의 부하를 분산하는 기기입니다. 헬스 체크를 통해 비정상적인 서버를 판별하고 있습니다.
    * 차이점 : L4 스위치는 인터넷 계층을 처리하는 기기입니다. 스트리밍 관련 서비스에서 사용할 수 없으며, 메시지를 기반으로 인식할 수 없습니다. 
2. L4 스위치와 L3 스위치 비교
    * L3 스위치는 주로 네트워크 계층에서 IP 주소를 기반으로 라우팅 기능을 수행하고 있습니다.
    * L4 스위치는 L3 기능을 기본적으로 하고, 추가적으로 TCP/UDP 포트 번호 기반의 더 세밀한 트래픽 관리를 제공합니다.
3. L3 스위치와 L2 스위치 비교
    * L2 스위치는 데이터 링크 계층에서 작동하며 MAC 주소를 기반으로 스위칭을 합니다. 라우팅 능력이 부재해서 다른 네트워크 또는 서브넷 간 트래픽을 처리할 수 없습니다.
    * L3 스위치는 L2 스위치 기능과 라우팅 기능을 갖춘 장비입니다. L3 스위치는 IP 주소 기반 라우팅을 합니다. 따라서 서로 다른 네트워크 또는 서브넷 간 트래픽을 라우팅할 수 있습니다. 
* L7 스위치와 L4 스위치 비교
    | 구분 | L7 스위치 | L4 스위치 |
    | ----- | ------ | ------ |
    | 처리 계층 | 애플리케이션 계층 | 인터넷 계층 |
    | 처리 범위 | | 스트리밍 관련 서비스에서 사용할 수 없음, 메시지를 기반으로 인식할 수 없다. |
    | 트래픽 분산 | IP, 포트 외에도 URL, HTTP 헤더, 쿠키 등을 기반 | IP와 포트를 기반으로 트래픽 분산 |
    | 헬스 체크 | O | O |
* L3 스위치와 L2 스위치 비교
    | 구분 | L2 스위치 | L3 스위치 |
    | ----- | -------- | ------- |
    | 참조 테이블 | MAC 주소 테이블 | 라우팅 테이블 |
    | 참조 PDU | 이더넷 프레임 | IP 패킷 |
    | 참조 주소 | MAC 주소 | IP 주소 |
    
# 관련 추가 질문
## TCP 연결 해제 과정에서 연결을 일정 시간 뒤에 닫는 이유는?
첫번째는 지연 패킷 때문입니다. 클라이언트가 FIN 세그먼트를 받은 뒤 연결을 바로 닫게 된다면 그 뒤에 도착하는 데이터 패킷이 전송될 수 없고, 데이터의 무결성이 깨지게 됩니다. 두번째는 두 장치의 연결이 닫혔는지 확인하기 위해서입니다. 만약 서버가 LAST_ACK 상태에서 닫히게 되면 다음 연결을 시작하려고 할 때 서버가 LAST_ACK로 되어 있어 접속 오류가 나타납게 됩니다.

## TCP/IP 4계층 기준 각 계층에 대한 설명
3. 인터넷 계층
* 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층
* IP, ARP, ICMP
* 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달

4. 링크 계층
* 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하여 장치 간에 신호를 주고받는 규칙을 정하는 계층

## OSI 7계층 기준 각 계층에 대한 설명


* L2 링크 계층
    * ```이더넷 프레임```을 통해 에러 확인, 흐름 제어, 접근 제어를 담당하는 계층
* L1 물리 계층
    * 무선 LAN과 유선 LAN을 통해 0과 1로 이루어진 데이터를 보내는 계층

## 계층 간 데이터 송수신 과정
* HTTP를 통해 웹 서버에 있는 데이터를 요청한다면?
