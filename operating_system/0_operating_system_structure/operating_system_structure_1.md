# 커널이란?

> Linux 운영체제의 주요 구성 요소이자 컴퓨터 하드웨어 프로세스를 잇는 핵심 인터페이스

![image](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Kernel_Layout.svg/440px-Kernel_Layout.svg.png)

- 시스템 자원을 효율적으로 관리하여 응용 프로그램이 실행될 수 있는 환경을 제공한다.
- 시스템의 안정성과 성능을 보장한다.

## 컴퓨터의 구분

- **하드웨어** : 컴퓨터 시스템을 물리적으로 구성하는 부분 (ex. CPU, 메모리, 저장 장치 등)
- **소프트웨어** : 하드웨어에서 작동하는 프로그램, 데이터 및 명령 집합
    - **응용 소프트웨어** : 특정 작업을 수행하기 위해 사용되는 소프트웨어(ex. 워드 프로세서, 웹 브라우저 등)
    - **시스템 소프트웨어** : 응용 소프트웨어를 실행하기 위한 플랫폼을 제공하고 컴퓨터 하드웨어를 동작, 접근할 수 있도록 설계된 컴퓨터 소프트웨어
        - **운영체제** : 하드웨어와 소프트웨어 간의 인터페이스 역할을 수행
                
            - **커널**
                - 운영체제의 핵심 서비스를 담당하는 부분
                - 컴퓨터 자원 관리
            - 시스템 프로그램
                - 사용자와 상호작용
        - 장치 드라이버
        - 컴파일러

## 커널의 5가지 관리자

> 컴퓨터의 물리적(하드웨어) 자원과 추상화 자원을 관리한다.

- `추상화`란 물리적으로 하나 뿐인 하드웨어를 여러 사용자들이 번갈아 사용하게 중재함으로써, 마치 `한 개의 하드웨어가 여러 개인 것처럼 보여지도록 하는 기술`을 말한다.
- 추상화된 환경에서 각 사용자들은 본인이 하나의 하드웨어를 독점하여 활용하는 것처럼 느낄 수 있다.

<br/><br/>

1. **태스크 관리자**

    물리적 자원인 CPU를 추상 자원인 태스크로 제공


2. **메모리 관리자**

    물리적 자원인 메모리를 추상 자원인 페이지나 세그먼트로 제공
3. **파일 시스템 관리자**

    물리적 자원인 디스크를 추상 자원인 파일로 제공
4. **네트워크 관리자**

    물리적 자원인 네트워크 장치를 추상 자원인 소켓으로 제공
5. **디바이스 드라이버 관리자**

    각종 외부 장치에 대한 접근을 제공

<br/>

> 💡 커널은 물리적 자원을 추상화하여 사용자가 물리적인 하드웨어에 보다 쉽게 접근할 수 있도록 도와준다.

<br/><br/>

## 이중 모드(Dual Mode)

> 컴퓨터 시스템에서 사용되는 두 가지 모드로, 크게 사용자 모드와 커널 모드로 구분하는 방식

<br/><br/> 

1. **사용자 모드(User Mode)**
- 운영체제 서비스를 제공받을 수 없는 실행 모드
- 즉, 커널 영역의 코드를 실행할 수 없는 모드
- 일반적인 응용 프로그램은 기본적으로 사용자 모드로 실행되며, 사용자 모드로 실행 중인 CPU는 입출력 명령어와 같이 하드웨어 자원에 접근하는 명령어를 실행할 수 없다.

<br/> 

2. **커널 모드(Kernel Mode)**
- 운영체제 서비스를 제공 받을 수 있는 실행 모드
- 커널 영역의 코드를 실행할 수 있는 모드
- CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 비롯한 모든 명령어를 실행할 수 있다.
- 운영체제는 커널 모드로 실행되기 때문에 자원에 접근할 수 있다.

<br/><br/> 

이중 모드는 운영체제가 시스템 자원을 효과적으로 관리하고 보호하기 위해 사용된다. 사용자 모드에서는 오동작이나 악의적인 프로그램의 영향을 최소화하고, 커널 모드에서는 시스템 자원을 효율적으로 관리할 수 있다.

<br/><br/> 

## 시스템 콜(SystemCall)
사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체제에 요청을 보내 커널 모드로 전환되어야 한다. 이때 운영체제 서비스를 제공 받기 위한 요청을 `시스템 콜`이라고 한다. 사용자 모드로 실행되는 프로그램은 시스템 콜을 통해 커널 모드로 전환하여 운영체제 서비스를 제공 받을 수 있다.

<br>

![image](https://phoenixnap.com/kb/wp-content/uploads/2023/08/system-call-steps-execution.png)

![image](https://github.com/user-attachments/assets/a09baeb7-0221-4839-8416-31aaa45056ea)

시스템 콜은 일종의 인터럽트(정확히는 소프트웨어 인터럽트)이다.

시스템 콜은 하드웨어를 제어하기 위해 운영체제의 커널이 제공하는 인터페이스이다. 응용 프로그램이 하드웨어를 직접 제어하는 것을 막고, 제공되는 시스템 콜을 이용하여서만 운영체제의 리소스를 사용할 수 있도록 하는 것이 목적이다.
