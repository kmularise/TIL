# MVC 패턴 구현
## 모델 2구조와 MVC 패턴
JSP 웹 애플리케이션 구조는 크게 모델 1 구조와 모델 2구조로 나뉜다. 
* 모델 1 구조 : JSP에서 모든 로직과 출력 처리
* 모델 2 구조 : JSP에서 출력만 처리

### 1. 모델 1 구조
![image](https://github.com/kmularise/TIL/assets/106499310/d33f022a-797c-45c5-9ba5-c6395f7111a0)
* JSP를 이용한 단순 모델
* 웹브라우저의 요청을 JSP가 직접 처리한다.
    * 이는 JSP 페이지에 비즈니스 로직을 처리하기 위한 코드와 웹 브라우저에 결과를 출력하는 코드가 섞인다는 것을 의미한다.
* 웹 브라우저의 요청을 받은 JSP는 자바빈이나 서비스 클래스를 사용해서 웹 브라우저가 요청한 작업을 처리하고 그 결과를 클라이언트에 출력한다.

### 2. 모델 2 구조
![image](https://github.com/kmularise/TIL/assets/106499310/2bc8f980-3ed4-48f3-b547-abc2c6a9fb75)
* 웹 브라우저의 요청을 하나의 서블릿이 받는다.
* 서블릿은 웹 브라우저의 요청을 알맞게 처리한 후 그 결과를 보여줄 JSP 페이지로 포워딩한다.
* 포워딩을 통해 요청 흐름을 받은 JSP 페이지는 결과 화면을 클라이언트에 전송한다.
* 이 과정에서 서블릿이 로직을 처리한다.
* 모델 2 구조 특징 : 웹 브라우저의 모든 요청을 단일 진입점, 즉 하나의 서블릿에서 처리한다. 


### 3. MVC 패턴
* MVC : Model-View-Controller, 모델-뷰-컨트롤러

[MVC 패턴의 세가지 구성요소]
* 모델 : 비즈니스 영역의 로직을 처리한다. 
* 뷰 : 비즈니스 영역에 대한 프레젠테이션 뷰(즉, 사용자가 보게 될 결과 화면)를 담당한다. (ex. 새로운 타입의 사용자(새로운 모바일 기기 추가) 추가)
* 컨트롤러 : 사용자의 입력 처리와 흐름 제어를 담당한다. (ex. 사용자 인증, 보안 설정)

[MVC 패턴의 구조]

![image](https://github.com/kmularise/TIL/assets/106499310/bb7de8ae-ffff-49f2-a6db-19722aa65b00)
* 사용자는 원하는 기능을 처리하기 위한 모든 요청을 컨트롤러에 보낸다.
* 모델은 비즈니스와 관련된 기능을 제공하는데, 컨트롤러는 이 모델을 이용해서 사용자의 요청을 처리한다.
* 모델을 사용하여 알맞은 비즈니스 로직을 수행한 후 컨트롤러는 사용자에게 보여줄 뷰를 선택한다.
* 선택된 뷰는 사용자에게 알맞은 결과 화면을 보여준다. 뷰가 사용자에게 결과 화면을 보여줄 때에는 데이터가 필요한데, 이 데이터는 컨트롤러를 통해서 전달받는다.

[MVC 패턴의 핵심]
* 비즈니스 로직을 처리하는 모델과 결과 화면을 보여주는 뷰를 분리한다.
* 애플리케이션 흐름 제어나 사용자의 처리 요청은 컨트롤러에 집중된다.

-> MVC 패턴을 사용함으로써 유지보수 작업이 쉬워지고 애플리케이션을 쉽게 확장할 수 있게 된다.
_________________________________
## MVC 패턴과 모델 2 구조의 매핑
* 컨트롤러 = 서블릿
* 모델 = 로직 처리 클래스, 자바빈
* 뷰 = JSP
* 사용자 = 웹 브라우저 내지 휴대폰과 같은 다양한 기기

### MVC의 컨트롤러 : 서블릿
서블릿은 웹 브라우저의 요청과 웹 애플리케이션의 전체적인 흐름을 제어한다.
![image](https://github.com/kmularise/TIL/assets/106499310/fe377b94-fbba-4c81-aa34-987772e87785)

1. 웹 브라우저가 전송한 HTTP 요청을 받는다.
2. 웹 브라우저가 어떤 기능을 요청했는지 분석한다.
3. 모델을 사용하여 요청한 기능을 수행한다.
4. 모델로부터 전달받은 결과물을 알맞게 가공한 후, request나 session을 사용하여 결과값을 속성에 저장한다. 이렇게 저장한 결과값은 뷰인 JSP에서 사용한다.
5. 웹 브라우저에 결과를 전송할 JSP를 선택한 후, 해당 JSP로 포워딩한다. 경우에 따라 리다이렉트를 하기도 한다.
### MVC의 뷰 : JSP
* 뷰 역할을 하는 JSP는 컨트롤러에서 request 기본 객체나 session 기본 객체에 저장한 데이터를 사용하여 웹 브라우저에 알맞은 결과를 출력한다.
* 웹 브라우저의 요청을 컨트롤러에 전달해주는 매개체가 되기도 한다. 즉, JSP는 웹 브라우저가 지속적으로 컨트롤러에 요청을 보낼 수 있는 링크나 폼을 제공해서 웹 브라우저가 업무 흐름에 따라 컨트롤러에 알맞은 요청을 보낼 수 있도록 한다.

### MVC 모델
* 비즈니스 로직을 처리해주면 모델이 될 수 있다.
* 모델이 제공해야 하는 기능은 웹 브라우저의 요청을 처리하는데 필요한 기능
![sevlet_model](https://github.com/kmularise/TIL/assets/106499310/10fd7e6e-e27f-460f-9932-8c4078d57427)
* 컨트롤러 서블릿이 적합한 모델 호출
* 모델은 컨트롤러가 요청한 작업 처리 후 알맞은 결과를 컨트롤러에 전달
* 이때 처리한 결과값을 저장하는 객체로 보통 자바빈을 사용한다.
* 모델은 서비스 클래스나 DAO 클래스를 이용해서 비즈니스 로직을 수행하게 된다.
_____________
## 모델1 구조와 모델 2 구조 장단점

| 모델 | 장점 | 단점 |
|-------------|---------|---------|
| 모델 1 | - 기능과 JSP가 직관적으로 연결된다. |- 로직 코드와 뷰 코드가 혼합되어 JSP 코드가 복잡해진다.<br>- 뷰 변경 시 논리 코드의 빈번한 복사가 발생해서 코드 중복이 발생하기 쉽다. 즉 유지보수가 힘들어진다. |
| 모델 2 | - 로직 코드와 뷰 코드를 분리해서 유지보수가 쉬워진다.<br>- 컨트롤러 서블릿에서 권한 검사나 인증과 같은 공통 기능 처리가 가능하다.<br>-확장이 용이하다.