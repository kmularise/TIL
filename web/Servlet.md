# 서블릿(Servlet)

## 서블릿 개발 과정
1. 서블릿 규약에 따라 자바 코드를 작성한다.
2. 자바 코드를 컴파일해서 클래스 파일을 생성한다.
3. /WEB-INF/classes 폴더에 클래스 파일을 패키지에 알맞게 위치시킨다.
4. web.xml 파일에 서블릿 클래스를 설정한다.
5. 톰캣 등의 컨테이너를 실행한다.
6. 웹 브라우저에서 확인한다.

## 서블릿 등록
* 서블릿으로 사용할 클래스
* 서블릿과 URL 간의 매핑
    서블릿 2.5 버전까지는 web.xml 파일에 서블릿으로 등록해야 서블릿 클래스를 사용할 수 있었는데, 서블릿 3.0 버전부터는 @WebServlet 어노테이션을 사용하면 서블릿으로 등록된다.
    * web.xml 파일에서 등록
    * 어노테이션 사용해서 등록 : web.xml 처럼 복잡하게 여러 태그로 설정하지 않아도 된다는 장점이 있다.
    URL 경로가 변경될 때, web.xml 파일을 사용하면 web.xml 파일만 변경하면 된다. 어노테이션을 사용하는 경우, urlPatterns 속성값을 변경하고 다시 컴파일해야 한다. 따라서 URL이 빈번하게 변경될 경우, web.xml 파일을 사용하는 것이 적절해 보인다.
```
@WebServlet 어노테이션이 적용된 서블릿을 web.xml 파일에 등록하게 되면 어떻게 될까?
이 경우 @WebServlet 어노테이션에 적용된 URL 패턴과 web.xml 파일에 등록된 URL 패턴에 모두 매핑된다. @WebServlet 어노테이션이 적용된 클래스 객체가 생성되고 web.xml 파일에서 지정한 클래스 객체가 생성된다. 즉, 서로 다른 두개의 객체가 생성된다.
```

## 서블릿 로딩과 초기화
![image](https://github.com/kmularise/TIL/assets/106499310/9dd3b0b6-cb23-48b7-b91f-63ea1194c7f8)
* 서블릿 컨테이너는 처음 서블릿을 실행할 때 서블릿 객체를 생성한다.
* 서블릿을 최초 요청할 때 서블릿 객체를 생성하고 이후 요청이 오면 앞서 생성한 서블릿 객체를 그대로 사용한다.
* 서블릿 로딩 : 웹 컨테이너가 서블릿 객체를 생성하고 init() 메소드를 호출하는 과정
* 초기화 작업 : 서블릿은 init() 메소드를 이용해서 필요한 초기화 작업을 수행한다. 초기화 작업은 상대적으로 시간이 오래 걸리기 때문에 웹 컨테이너를 처음 구동하는 시점에 초기화를 진행하는 것이 좋다.

## 초기화 파라미터
JDBC 드라이버 클래스 이름, JDBC URL, DB 사용자 정보와 같이 초기에 설정하는 값들을 설정파일 web.xml의 초기화 파라미터를 변경하는 방법으로 변경할 수 있다. 코드를 직접 변경하지 않고 초기 값들을 변경하고 소스코드 상에서 초기값들을 읽을 수 있다. 어노테이션으로도 동일하게 할 수 있으나 초기화 설정을 변경해야 할 때마다 자바 코드를 수정해야 하기 때문에 변경의 유연함을 떨어뜨린다.

## URL 패턴 매칭 규칙
* '/'로 시작하고 '/*'로 끝나는 url-pattern 은 경로 매핑을 위해서 사용한다.
* '*.'로 시작하는 url-pattern은 확장자에 대한 매핑을 할 때 사용한다.
* 오직 '/'만 포함하는 경우 애플리케이션의 기본 서블릿으로 매핑한다.
* 이 규칙 외, 나머지 다른 문자열은 정확한 매핑을 위해서 사용한다.

## 비동기 서블릿 


## 인텔리제이 프로젝트 설정
https://suyeonchoi.tistory.com/33
